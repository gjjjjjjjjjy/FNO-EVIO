## train_fno_vio.py 顶层符号

| 符号 | 类型 | baseline 行号 | 当前实现 |
|---|---:|---:|---|
| AdaptiveEventProcessor | class | 3092 | `fno_evio/data/events.py` |
| AdaptiveLossWeights | class | 1811 | `fno_evio/training/loop.py` |
| BaseFNOBlock | class | 2271 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |
| CollateSequence | class | 2881 | `fno_evio/data/sequence.py` |
| DatasetConfig | class | 40 | `fno_evio/config/schema.py` |
| EarlyStopping | class | 4220 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |
| EventProcessor | class | 2980 | `fno_evio/data/events.py` |
| FNOUnit | class | 2205 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |
| GeometryUtils | class | 321 | `fno_evio/training/loss_components.py` |
| HybridVIONet | class | 2383 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |
| IMUKinematics | class | 1948 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |
| IMUStateManager | class | 1890 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |
| IdentityAttention | class | 2187 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |
| ImprovedIMUEncoder | class | 1837 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |
| LossComposer | class | 203 | `fno_evio/training/loss_components.py` |
| MR_FNOBlock | class | 2315 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |
| ModelConfig | class | 68 | `fno_evio/config/schema.py` |
| NativeLSTM | class | 2124 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |
| NumericalConstants | class | 162 | `fno_evio/common/constants.py` |
| OptimizedTUMDataset | class | 506 | `fno_evio/data/datasets.py` |
| PDELayer | class | 1782 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |
| PhysicsBrightnessLoss | class | 2821 | `fno_evio/training/physics.py` |
| RootGroupedBatchSampler | class | 5290 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |
| SequenceDataset | class | 2942 | `fno_evio/data/sequence.py` |
| TrainingConfig | class | 99 | `fno_evio/config/schema.py` |
| TrainingConstants | class | 174 | `fno_evio/common/constants.py` |
| UnifiedFNOBlock | class | 2284 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |
| _adjust_hidden_size | def | 3287 | `fno_evio/eval/evaluate.py` |
| _backward_and_step | def | 4537 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |
| _clip_gradients_complex_safe | def | 4518 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |
| _compute_loss_components | def | 3256 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |
| _compute_total_loss | def | 4307 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |
| _compute_velocity_loss | def | 4299 | `fno_evio/training/loss_total.py` |
| _detach_hidden | def | 3280 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |
| _extract_bias_prior_from_calib | def | 5229 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |
| _find_first_matching_file | def | 438 | `fno_evio/data/datasets.py` |
| _forward_and_compute_loss | def | 4555 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |
| _get_ids | def | 3309 | `fno_evio/eval/evaluate.py` |
| _infer_dataset_root_from_calib | def | 462 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |
| _norm_unit_str | def | 385 | `fno_evio/data/preprocess.py` |
| _pick_shortest_path | def | 432 | `fno_evio/config/calib.py` |
| _resolve_existing_path | def | 395 | `fno_evio/config/calib.py` |
| _tbptt_update | def | 3356 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |
| add_argument_group | def | 4936 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |
| amp_autocast_context | def | 4282 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |
| build_device | def | 2810 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |
| collate_sequence | def | 2939 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |
| compute_adaptive_sequence_length | def | 374 | `fno_evio/common/constants.py` |
| create_datasets | def | 5375 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |
| create_pde_layer | def | 1802 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |
| evaluate | def | 3405 | `fno_evio/eval/evaluate.py` |
| integrate_imu_step | def | 1916 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |
| load_calibration | def | 5173 | `fno_evio/config/calib.py` |
| log | def | 381 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |
| main | def | 5918 | `fno_evio/app.py` |
| make_attention | def | 2193 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |
| monitor_memory_usage | def | 4774 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |
| parse_command_line_arguments | def | 4943 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |
| process_batch_sequence | def | 4641 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |
| run_training_loop | def | 5613 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |
| safe_divide | def | 186 | `fno_evio/common/constants.py` |
| setup_argument_groups | def | 4786 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |
| setup_configurations | def | 4989 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |
| setup_device_and_environment | def | 5144 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |
| setup_logging | def | 5253 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |
| setup_training_components | def | 5531 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |
| setup_training_state | def | 4275 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |
| train_one_epoch | def | 3197 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |
| unpack_and_validate_batch | def | 4289 | `fno_evio/training/step.py` |
| update_epoch_metrics | def | 4770 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |
| validate_imu_integration | def | 5809 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |
| validate_state_continuity | def | 5861 | `fno_evio/legacy/train_fno_vio.py`（完整迁移拷贝） |

## utils.py 顶层符号

| 符号 | 类型 | baseline 行号 | 当前实现 |
|---|---:|---:|---|
| Logger | class | 140 | `fno_evio/utils/io.py` |
| QuaternionUtils | class | 185 | `fno_evio/utils/quaternion_np.py` |
| align_trajectory | def | 283 | `fno_evio/legacy/utils.py`（完整迁移拷贝） |
| align_trajectory_with_timestamps | def | 749 | `fno_evio/utils/trajectory.py` |
| align_trajectory_with_timestamps_sim3 | def | 777 | `fno_evio/utils/trajectory.py` |
| associate_by_timestamp | def | 733 | `fno_evio/utils/trajectory.py` |
| compose_se3 | def | 449 | `fno_evio/utils/quaternion_torch.py` |
| compute_ols_scale_stats | def | 837 | `fno_evio/utils/trajectory.py` |
| compute_rpe_loss | def | 464 | `fno_evio/utils/metrics.py` |
| ensure_dir | def | 136 | `fno_evio/utils/io.py` |
| is_low_shm | def | 114 | `fno_evio/utils/io.py` |
| kb4_project | def | 11 | `fno_evio/legacy/utils.py`（完整迁移拷贝） |
| kb4_project_torch | def | 581 | `fno_evio/utils/events_warp.py` |
| kb4_unproject | def | 30 | `fno_evio/utils/camera.py` |
| kb4_unproject_torch | def | 521 | `fno_evio/utils/events_warp.py` |
| matrix_to_rotation_6d | def | 723 | `fno_evio/utils/rotation.py` |
| quat_inverse | def | 426 | `fno_evio/utils/quaternion_torch.py` |
| quat_multiply | def | 417 | `fno_evio/utils/quaternion_torch.py` |
| quat_normalize | def | 411 | `fno_evio/utils/quaternion_torch.py` |
| quat_to_rotmat | def | 429 | `fno_evio/utils/quaternion_torch.py` |
| read_txt_skip_first_line | def | 175 | `fno_evio/utils/io.py` |
| rescale_intrinsics_kb4 | def | 91 | `fno_evio/utils/camera.py` |
| rescale_intrinsics_pinhole | def | 335 | `fno_evio/utils/camera.py` |
| rotation_6d_to_matrix | def | 707 | `fno_evio/utils/rotation.py` |
| safe_geodesic_loss | def | 456 | `fno_evio/utils/quaternion_torch.py` |
| warp_events_flow | def | 370 | `fno_evio/utils/events_warp.py` |
| warp_events_flow_torch | def | 496 | `fno_evio/utils/events_warp.py` |
| warp_events_flow_torch_kb4 | def | 601 | `fno_evio/utils/events_warp.py` |
